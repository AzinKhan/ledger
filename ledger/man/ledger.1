.Dd June 25, 2021
.Dt LEDGER 1
.Os
.Sh NAME
.Nm ledger
.Nd Command-line, double-entry accounting tool
.Sh SYNOPSIS
.Nm
.Op Ar options
.Op Ar command
.Op Ar arguments
.Sh DESCRIPTION
.Nm
is a command-line accounting tool based on the power and completeness
of double-entry accounting.  It is only a reporting tool, which means it never
modifies your data files, but it does offer a large selection of reports, and
different ways to customize them to your needs. It also offers a command to 
import a csv file and output them into ledger format. Plus a web service
interface to view reports with charts/tables.
.Sh REPORT COMMANDS
.Nm
accepts several top-level commands, each of which generates a different
kind of basic report.  Most of them accept a
.Ar account-filter
argument, in order to determine what should be reported.  To understand the
syntax of a
.Ar account-filter ,
see the section on
.Sx FILTERS .
In its most basic form, simply specifying one or more strings produces a
report for all accounts containing those strings.
.Pp
The following is a complete list of reporting commands:
.Bl -tag -width balance
.It Ic balance Oo Ar account-filter Oc
Print a balance report showing totals for postings that match
.Ar account-filter ,
and aggregate totals for parents of those accounts.  Options available for 
this command are:
.Bl -tag -compact -width "--collapsed   (-n)"
.It Fl \-begin-date Pq Fl b 
Begin date of transactions to include in processing.
.It Fl \-columns Ar INT
Width of output in characters.
.It Fl \-depth Ar INT
Limit the depth of the account tree.  In a balance report, for example,
.Fl \-depth Ar 2
will print balances only for accounts with two levels, i.e.
.Sy Expenses:Entertainment
but not
.Sy Expenses:Entertainment:Dining .
This is a display predicate, which means it only affects display,
not the total calculations.  In register reports,
.It Fl \-empty
Show accounts whose total is zero.
.It Fl \-end-date Pq Fl e
End date of transactions to include in processing.
.It Fl \-payee Ar STR
Filter transactions used in processing to payees that contain this string.
.It Fl \-period Ar STR
Split output into multiple results based on specified period. Valid options are:
.Sy Monthly ,
.Sy Quarterly ,
.Sy SemiYearly ,
.Sy Yearly
.It Fl \-wide
Alias for --columns=132
.El
.Pp
The alias
.Ic bal
is also accepted.
.It Ic equity
Print a transaction with a series of postings that balance current totals for
accounts. The purpose of this report is to close the books for a prior year, while using
these equity postings to carry forward those balances. Options available for this
command are:
.Bl -tag -compact -width "--collapsed   (-n)"
.It Fl \-begin-date Pq Fl b 
Begin date of transactions to include in processing.
.It Fl \-end-date Pq Fl e
End date of transactions to include in processing.
.El
.It Ic lint
Parse the 
.Nm
file and output any parsing errors.
.It Ic print Oo Ar account-filter Oc
Print out the full transactions of any matching postings using the same
format as they would appear in a data file.  This can be used to extract
subsets from a
.Nm
file to transfer to other files.  Options available for 
this command are:
.Bl -tag -compact -width "--collapsed   (-n)"
.It Fl \-begin-date Pq Fl b 
Begin date of transactions to include in processing.
.It Fl \-columns Ar INT
Width of output in characters.
.It Fl \-end-date Pq Fl e
End date of transactions to include in processing.
.It Fl \-payee Ar STR
Filter transactions used in processing to payees that contain this string.
.It Fl \-wide
Alias for --columns=132
.El
.It Ic register Oo Ar account-filter Oc
List all postings matching the
.Ar account-filter .
This is one of the most common commands, and can be used to provide a variety
of useful reports. Options available for this command are:
.Bl -tag -compact -width "--collapsed   (-n)"
.It Fl \-begin-date Pq Fl b 
Begin date of transactions to include in processing.
.It Fl \-columns Ar INT
Width of output in characters.
.It Fl \-end-date Pq Fl e
End date of transactions to include in processing.
.It Fl \-payee Ar STR
Filter transactions used in processing to payees that contain this string.
.It Fl \-period Ar STR
Split output into multiple results based on specified period. Valid options are:
.Sy Monthly ,
.Sy Quarterly ,
.Sy SemiYearly ,
.Sy Yearly
.It Fl \-wide
Alias for --columns=132
.El
.Pp
The alias
.Ic reg
is also accepted.
.It Ic stats
Provide summary information about all the postings.
It provides information such as:
.Bl -bullet -offset indent -compact
.It
Time range of all matching postings
.It
Unique payees
.It
Unique accounts
.It
Transactions total
.It
Postings total
.It
Days since last posting
.El
.It Ic version
Output version string.
.El
.Sh OPTIONS
.Bl -tag -width -indent
.It Fl \-file Ar FILE Pq Fl f
Read journal data from
.Ar FILE .
.El
.Sh FILTERS
The syntax for reporting account filters.  It is a series of patterns
with an implicit OR operator between them.
.Bl -tag -width "term and term"
.It Ar pattern
A bare string is taken as a sub-expression matching the full account name.
Thus, to report the current balance for all assets and liabilities, you would
use:
.Pp
.Dl ledger bal asset liab
.El
.Sh ENVIRONMENT
The default ledger file can be set as the environment variable
.Ar LEDGER_FILE
which can be overriden with
.Fl \-file Ar FILE Pq Fl f
on the command-line.  Options on the command-line always take precedence over
environment variable settings.
.Sh AUTHORS
.An "Chris Howey"
.Aq chris@howey.me
.\" .Sh BUGS              \" Document known, unremedied bugs
.\" .Sh HISTORY           \" Document history if command behaves in a unique manner
